<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Sohbet</title>
<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#f0f2f5;
}
#chat{
  max-width:500px;
  margin:auto;
  height:100vh;
  display:flex;
  flex-direction:column;
  background:white;
}
#messages{
  flex:1;
  padding:10px;
  overflow-y:auto;
}
.msg{
  padding:8px 12px;
  margin:5px 0;
  border-radius:16px;
  max-width:75%;
  font-size:14px;
}
.me{
  background:#3797f0;
  color:white;
  margin-left:auto;
}
.other{
  background:#e4e6eb;
}
#sendBox{
  display:flex;
  border-top:1px solid #ccc;
}
#sendBox input{
  flex:1;
  padding:10px;
  border:none;
  font-size:14px;
}
#sendBox button{
  border:none;
  background:#3797f0;
  color:white;
  padding:0 20px;
  cursor:pointer;
}
</style>
</head>

<body>
<div id="chat">
  <div id="messages"></div>
  <div id="sendBox">
    <input id="text" placeholder="Mesaj yaz...">
    <button onclick="send()">GÃ¶nder</button>
  </div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
var firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJECT_ID.firebaseapp.com",
  databaseURL: "https://PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "PROJECT_ID"
};
firebase.initializeApp(firebaseConfig);

var db = firebase.database();
var messagesRef = db.ref("chat");

var username = "User" + Math.floor(Math.random()*10000);

messagesRef.limitToLast(100).on("child_added", function(snapshot){
  var m = snapshot.val();
  addMessage(m.user, m.text);
});

function send(){
  var input = document.getElementById("text");
  if(input.value.trim() === "") return;

  messagesRef.push({
    user: username,
    text: input.value
  });
  input.value = "";
}

function addMessage(user,text){
  var div = document.createElement("div");
  div.className = "msg " + (user === username ? "me" : "other");
  div.innerText = text;
  document.getElementById("messages").appendChild(div);
  document.getElementById("messages").scrollTop =
    document.getElementById("messages").scrollHeight;
}
</script>
</body>
</html>